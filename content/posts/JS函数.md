---
title: "JS函数"
date: 2019-12-28T15:24:53+08:00
draft: false
---

#### 函数声明的方法
1. 具名函数 function fn(){}
2. 匿名函数/函数表达式 let a = function(){}
3. 箭头函数 let a =（x,y）=>{x*y}，没有this
  * 参数只有一个时可以写成 let a = x => x*x
  *  {} 内只有一个表达式时可以省略{}和return，如果想表达返回一个对象,需要加一个圆括号 let a =x =>({name:a})
4. 构造函数 let fn1 =new Function("x","y","return x*y")  
  *  所有函数是由Function 构造的
##### let a = function fn(){},这种声明方式无法，在外部无法调用 fn()，因为fn 的作用域只在等号右面

#### 函数的要素
1. 调用时机
2. 作用域
  * 全局变量:在顶级作用域声明的变量;或者直接声明 window.a 
  * 局部变量  
  * 作用域规则(如果多个作用域有同名变量a)
      1. 查找a的声明，就向上取就近的作用域
      2. 查找a的过程和函数执行无关，但是a的值与函数执行有关    
3. 闭包
   * 如果一个函数用到了外部的变量，那么这个函数加这个变量就叫做闭包 
4. 形式参数 
5. 返回值
   * 每个函数都有返回值,不写return,返回值则是undefined
   * 只有函数有返回值
6. 调用栈
7.函数提升
  * JS引擎在调用一个函数前，需要把函数所在的环境push到一个数组里，执行结束后，再把环境pop出来，然后return到之前的环境，继续执行代码。这个数组就叫调用栈
8. arguments:伪数组
9. this
   * 默认指向window
   * 通过 call 来指定this ,j即是传入的第一个参数fn.call("xxx",1,2,3),
10. 立即执行函数
  * !function(){ var a =1}(),可以声明一个局部变量(前面需要一个操作符，+，-，！) 不建议用括号做立即执行函数，(function(){}())
  * ES6 只需要{let a=1}就可以声明一个局部变量


